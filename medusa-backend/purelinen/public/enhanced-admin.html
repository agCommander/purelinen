<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Medusa Admin - Product Type System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            color: #1e293b;
        }

        .header {
            background: #1e293b;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 0 2rem;
        }

        .nav-tab {
            padding: 1rem 1.5rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .nav-tab.active {
            border-bottom-color: #3b82f6;
            color: #3b82f6;
        }

        .nav-tab:hover {
            background: #f1f5f9;
        }

        .content {
            padding: 2rem;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .product-grid {
            background: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .product-grid-header {
            padding: 1rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .product-grid table {
            width: 100%;
            border-collapse: collapse;
        }

        .product-grid th,
        .product-grid td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .product-grid th {
            background: #f8fafc;
            font-weight: 600;
        }

        .product-type {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .type-simple {
            background: #dcfce7;
            color: #166534;
        }

        .type-configurable {
            background: #dbeafe;
            color: #1e40af;
        }

        .type-grouped {
            background: #fef3c7;
            color: #92400e;
        }

        .type-bundle {
            background: #f3e8ff;
            color: #7c3aed;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .wizard-steps {
            display: flex;
            margin-bottom: 2rem;
            background: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .wizard-step {
            flex: 1;
            text-align: center;
            padding: 1rem;
            position: relative;
        }

        .wizard-step.active {
            color: #3b82f6;
            font-weight: 600;
        }

        .wizard-step.completed {
            color: #059669;
        }

        .wizard-step:not(:last-child)::after {
            content: '';
            position: absolute;
            right: -50%;
            top: 50%;
            width: 100%;
            height: 2px;
            background: #e2e8f0;
            z-index: 1;
        }

        .wizard-step.completed:not(:last-child)::after {
            background: #059669;
        }

        .wizard-step.active:not(:last-child)::after {
            background: #3b82f6;
        }

        .wizard-content {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 1rem;
        }

        .variant-matrix {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }

        .variant-matrix table {
            width: 100%;
            border-collapse: collapse;
        }

        .variant-matrix th,
        .variant-matrix td {
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            text-align: center;
        }

        .variant-matrix th {
            background: #f8fafc;
            font-weight: 600;
        }

        .variant-matrix input {
            width: 80px;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 4px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #3b82f6;
        }

        .stat-label {
            color: #6b7280;
            margin-top: 0.5rem;
        }

        .stock-info {
            font-size: 0.875rem;
            color: #1e293b;
        }

        .stock-level {
            font-weight: 600;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            display: inline-block;
        }

        .stock-level.high {
            background-color: #d1fae5;
            color: #065f46;
        }

        .stock-level.medium {
            background-color: #fef3c7;
            color: #92400e;
        }

        .stock-level.low {
            background-color: #fee2e2;
            color: #991b1b;
        }

        .stock-breakdown {
            margin-top: 0.25rem;
            font-size: 0.75rem;
            color: #6b7280;
        }

        .store-status {
            font-size: 0.875rem;
            color: #1e293b;
        }

        .status-enabled {
            color: #059669;
            font-weight: 600;
        }

        .status-disabled {
            color: #dc2626;
            font-weight: 600;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 8px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .modal-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            color: #1e293b;
        }

        .close {
            color: #6b7280;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #1e293b;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #e2e8f0;
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }

        .store-settings {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .store-setting {
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 1rem;
            background: #f8fafc;
        }

        .store-setting h5 {
            margin: 0 0 1rem 0;
            color: #1e293b;
            font-size: 1rem;
        }

        .setting-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.75rem;
            align-items: center;
        }

        .setting-row label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .setting-row input[type="number"] {
            width: 100px;
            padding: 0.25rem 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 4px;
        }

        /* New styles for image management */
        .image-management {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .image-upload-area {
            border: 2px dashed #e2e8f0;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .image-upload-area:hover {
            border-color: #3b82f6;
            background: #f1f5f9;
        }

        .upload-zone {
            position: relative;
            width: 100%;
            height: 200px; /* Fixed height for the upload zone */
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8fafc;
            border-radius: 8px;
            overflow: hidden;
        }

        .upload-text {
            text-align: center;
            color: #6b7280;
        }

        .upload-text span {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .image-gallery-preview {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }

        .main-image {
            width: 100%;
            height: 400px; /* Fixed height for the main image preview */
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f3f4f6;
            overflow: hidden;
        }

        .main-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .thumbnail-strip {
            display: flex;
            gap: 0.5rem;
            padding: 0.5rem;
            background: #f8fafc;
            overflow-x: auto;
            scrollbar-width: none; /* Hide scrollbar for Firefox */
            -ms-overflow-style: none;  /* Hide scrollbar for IE and Edge */
        }

        .thumbnail-strip::-webkit-scrollbar {
            display: none; /* Hide scrollbar for Chrome, Safari and Opera */
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            cursor: pointer;
            overflow: hidden;
            flex-shrink: 0;
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .thumbnail.active {
            border: 2px solid #3b82f6;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .thumbnail.add-thumbnail {
            background: #3b82f6;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
        }

        .thumbnail.add-thumbnail:hover {
            background: #2563eb;
        }

        .color-swatches {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        .swatch-group {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            background: #f8fafc;
            width: calc(33.33% - 0.75rem); /* Three columns with gap */
            box-sizing: border-box;
        }

        .swatch-group h5 {
            margin-bottom: 0.75rem;
            color: #1e293b;
        }

        .swatch-images {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            scrollbar-width: none; /* Hide scrollbar for Firefox */
            -ms-overflow-style: none;  /* Hide scrollbar for IE and Edge */
        }

        .swatch-images::-webkit-scrollbar {
            display: none; /* Hide scrollbar for Chrome, Safari and Opera */
        }

        .swatch-image {
            width: 60px;
            height: 60px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            flex-shrink: 0;
            position: relative;
        }

        .swatch-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .swatch-image .swatch-upload {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
            z-index: 10;
        }

        .swatch-image .swatch-label {
            position: absolute;
            bottom: 0;
            left: 0;
            background: rgba(0,0,0,0.5);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0 0 4px 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .variant-images {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .variant-image-row {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .variant-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .variant-info strong {
            font-size: 1rem;
            color: #1e293b;
        }

        .variant-info small {
            font-size: 0.75rem;
            color: #6b7280;
        }

        .variant-image-uploads {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .variant-image {
            width: 80px;
            height: 80px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            flex-shrink: 0;
            position: relative;
        }

        .variant-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .variant-image .image-label {
            position: absolute;
            bottom: 0;
            left: 0;
            background: rgba(0,0,0,0.5);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0 0 4px 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .image-settings {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .image-settings .setting-row {
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .image-settings .setting-row label {
            flex: 1;
            min-width: 150px; /* Ensure labels don't wrap */
        }

        /* Frontend Preview Styles */
        .frontend-preview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            max-height: 600px;
            overflow-y: auto;
        }

        .product-gallery {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .main-product-image {
            position: relative;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
            background: #f8fafc;
        }

        .main-product-image img {
            width: 100%;
            height: 400px;
            object-fit: cover;
        }

        .image-zoom-hint {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.875rem;
        }

        .image-thumbnails {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
        }

        .image-thumbnails .thumbnail {
            width: 60px;
            height: 60px;
            border: 2px solid transparent;
            border-radius: 4px;
            cursor: pointer;
            overflow: hidden;
            flex-shrink: 0;
        }

        .image-thumbnails .thumbnail.active {
            border-color: #3b82f6;
        }

        .image-thumbnails .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-details {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .product-details h2 {
            margin: 0;
            color: #1e293b;
            font-size: 1.5rem;
        }

        .price {
            font-size: 1.25rem;
            font-weight: 600;
            color: #3b82f6;
        }

        .product-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .option-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .option-group label {
            font-weight: 500;
            color: #1e293b;
        }

        .option-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .option-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .color-swatches-frontend {
            display: flex;
            gap: 0.5rem;
        }

        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .color-swatch.active {
            border: 2px solid #3b82f6 !important;
        }

        .color-swatch .swatch-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: #6b7280;
            white-space: nowrap;
        }

        .quantity-selector {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .qty-btn {
            width: 40px;
            height: 40px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .quantity-controls input {
            width: 60px;
            height: 40px;
            text-align: center;
            border: 1px solid #d1d5db;
            border-radius: 4px;
        }

        .add-to-cart-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .add-to-cart-btn:hover {
            background: #2563eb;
        }

        .product-description {
            border-top: 1px solid #e2e8f0;
            padding-top: 1rem;
        }

        .product-description h3 {
            margin: 0 0 0.5rem 0;
            color: #1e293b;
            font-size: 1rem;
        }

        .product-description p {
            margin: 0 0 1rem 0;
            color: #6b7280;
            line-height: 1.5;
        }

        .product-description ul {
            margin: 0;
            padding-left: 1.5rem;
            color: #6b7280;
        }

        .product-description li {
            margin-bottom: 0.25rem;
        }

        .discount-type {
            font-weight: 600;
            color: #dc2626;
        }

        .discount-price {
            font-weight: 600;
            color: #dc2626;
        }

        .status-active {
            color: #059669;
            font-weight: 600;
        }

        .status-expiring {
            color: #dc2626;
            font-weight: 600;
        }

        .status-scheduled {
            color: #dc2626;
            font-weight: 600;
        }

        /* Discount Management Styles */
        .discount-type.percentage {
            background: #fef3c7;
            color: #92400e;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.875rem;
        }

        .discount-type.fixed {
            background: #dbeafe;
            color: #1e40af;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.875rem;
        }

        .discount-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .product-selector,
        .store-selector,
        .category-selector {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 1rem;
            background: #f8fafc;
        }

        .product-option,
        .store-option,
        .category-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .discount-type-selector {
            display: flex;
            gap: 1rem;
        }

        .type-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .discount-value-input {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .discount-value-input input {
            width: 120px;
        }

        .discount-value-input span {
            font-weight: 600;
            color: #6b7280;
        }

        .date-range {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .date-input {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .discount-preview {
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 1rem;
            background: #f8fafc;
        }

        .preview-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
        }

        .price-comparison {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .original-price {
            text-decoration: line-through;
            color: #6b7280;
        }

        .arrow {
            color: #6b7280;
        }

        .discounted-price {
            font-weight: 600;
            color: #dc2626;
        }

        .savings {
            color: #059669;
            font-size: 0.875rem;
        }

        .bulk-discount-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .bulk-settings {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 1rem;
            background: #f8fafc;
        }

        .bulk-settings .setting-row {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .bulk-settings .setting-row label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
        }

        .bulk-settings .setting-row input,
        .bulk-settings .setting-row select {
            width: 120px;
        }

        .impact-summary {
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 1rem;
            background: #f8fafc;
        }

        .impact-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .impact-item:last-child {
            border-bottom: none;
        }

        /* Discount Badge Styles */
        .discount-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .discount-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
        }

        .discount-badge.active {
            background-color: #d1fae5;
            color: #065f46;
        }

        .discount-badge.expiring {
            background-color: #fef3c7;
            color: #92400e;
        }

        .discount-badge.scheduled {
            background-color: #f3e8ff;
            color: #7c3aed;
        }

        .discount-info small {
            color: #6b7280;
            font-size: 0.75rem;
        }

        /* Swatch Database Styles */
        .swatch-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .swatch-filters select {
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
        }

        .swatch-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .swatch-preview {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .category-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .category-badge.neutral {
            background-color: #f3f4f6;
            color: #374151;
        }

        .category-badge.bold {
            background-color: #fee2e2;
            color: #991b1b;
        }

        .category-badge.pastel {
            background-color: #fce7f3;
            color: #be185d;
        }

        .category-badge.earth {
            background-color: #fef3c7;
            color: #92400e;
        }

        .category-badge.cool {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .category-badge.warm {
            background-color: #fed7aa;
            color: #c2410c;
        }

        .image-sizes {
            display: flex;
            gap: 0.5rem;
        }

        .size-badge {
            padding: 0.25rem 0.5rem;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            font-size: 0.75rem;
            font-family: monospace;
        }

        /* Updated Stock Display */
        .stock-breakdown {
            margin-top: 0.25rem;
        }

        .stock-breakdown small {
            color: #6b7280;
            font-size: 0.75rem;
        }

        /* Swatch Modal Styles */
        .color-picker-container {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .color-picker-container input[type="color"] {
            width: 60px;
            height: 40px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            cursor: pointer;
        }

        .color-picker-container input[type="text"] {
            flex: 1;
        }

        .help-text {
            color: #6b7280;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        .swatch-preview-section {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 6px;
        }

        .swatch-preview-section h4 {
            margin: 0 0 1rem 0;
            color: #374151;
        }

        .swatch-preview-large {
            width: 120px;
            height: 180px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 1rem;
            background: #f8fafc;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 0.875rem;
        }

        .swatch-preview-thumb {
            width: 60px;
            height: 90px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            background: #f8fafc;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 0.75rem;
        }

        .search-controls {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .search-results {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
        }

        .search-result-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid #e2e8f0;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .search-result-item:hover {
            background-color: #f8fafc;
        }

        .search-result-item.selected {
            background-color: #dbeafe;
            border-left: 4px solid #3b82f6;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-preview {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }

        .search-result-info {
            flex: 1;
        }

        .search-result-info strong {
            display: block;
            margin-bottom: 0.25rem;
        }

        .search-result-info small {
            color: #6b7280;
        }

        .search-result-usage {
            text-align: right;
            color: #6b7280;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">üè™ Enhanced Medusa Admin</div>
        <div>Welcome, Admin</div>
    </div>

    <div class="nav-tabs">
        <div class="nav-tab active" onclick="showTab('dashboard')">üìä Dashboard</div>
        <div class="nav-tab" onclick="showTab('products')">üì¶ Products</div>
        <div class="nav-tab" onclick="showTab('stock')">üì¶ Stock Management</div>
        <div class="nav-tab" onclick="showTab('discounts')">üè∑Ô∏è Discounts</div>
        <div class="nav-tab" onclick="showTab('configurable')">‚öôÔ∏è Configurable Products</div>
        <div class="nav-tab" onclick="showTab('grouped')">üì¶ Grouped Products</div>
        <div class="nav-tab" onclick="showTab('attributes')">üè∑Ô∏è Attributes</div>
        <div class="nav-tab" onclick="showTab('swatches')">üé® Swatch Database</div>
        <div class="nav-tab" onclick="showTab('analytics')">üìà Analytics</div>
    </div>

    <div class="content">
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <h2>üìä Dashboard Overview</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">3,355</div>
                    <div class="stat-label">Total Products</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">2,105</div>
                    <div class="stat-label">Simple Products</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1,250</div>
                    <div class="stat-label">Configurable Products</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">45</div>
                    <div class="stat-label">Grouped Products</div>
                </div>
            </div>
            
            <div class="product-grid">
                <div class="product-grid-header">
                    <h3>Recent Products</h3>
                    <button class="btn btn-primary">Add Product</button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Type</th>
                            <th>SKU</th>
                            <th>Price</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Pure Linen Duvet Cover</td>
                            <td><span class="product-type type-configurable">Configurable</span></td>
                            <td>PL-DC-001</td>
                            <td>$89.99 - $119.99</td>
                            <td>Active</td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Luxury Bedding Set</td>
                            <td><span class="product-type type-grouped">Grouped</span></td>
                            <td>LBS-001</td>
                            <td>$199.99</td>
                            <td>Active</td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Custom Bedding Bundle</td>
                            <td><span class="product-type type-bundle">Bundle</span></td>
                            <td>CBB-001</td>
                            <td>From $89.99</td>
                            <td>Active</td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Products Tab -->
        <div id="products" class="tab-content">
            <div class="product-grid-header">
                <h2>üì¶ Product Management</h2>
                <div>
                    <button class="btn btn-secondary" onclick="showTab('configurable')">Add Configurable</button>
                    <button class="btn btn-secondary" onclick="showTab('grouped')">Add Grouped</button>
                    <button class="btn btn-primary">Add Simple</button>
                </div>
            </div>
            
            <div class="product-grid">
                <table>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Type</th>
                            <th>SKU</th>
                            <th>Price Range</th>
                            <th>Stock Level</th>
                            <th>Store Status</th>
                            <th>Active Discounts</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Pure Linen Duvet Cover</td>
                            <td><span class="product-type type-configurable">Configurable</span></td>
                            <td>PL-DC-001</td>
                            <td>$89.99 - $119.99</td>
                            <td>
                                <div class="stock-info">
                                    <span class="stock-level high">Shared Stock: 156 units</span>
                                    <div class="stock-breakdown">
                                        <small>Available across both stores</small>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="store-status">
                                    <span class="status-enabled">‚úÖ purelinen</span>
                                    <span class="status-disabled">‚ùå linenthings</span>
                                </div>
                            </td>
                            <td>
                                <div class="discount-info">
                                    <span class="discount-badge active">20% OFF</span>
                                    <small>Until Jul 31</small>
                                </div>
                            </td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                                <button class="btn btn-secondary">Manage Stock</button>
                                <button class="btn btn-secondary" onclick="showStoreSettingsModal()">Store Settings</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Luxury Bedding Set</td>
                            <td><span class="product-type type-grouped">Grouped</span></td>
                            <td>LBS-001</td>
                            <td>$199.99</td>
                            <td>
                                <div class="stock-info">
                                    <span class="stock-level medium">Shared Stock: 12 units</span>
                                    <div class="stock-breakdown">
                                        <small>Low stock - reorder soon</small>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="store-status">
                                    <span class="status-enabled">‚úÖ purelinen</span>
                                    <span class="status-enabled">‚úÖ linenthings</span>
                                </div>
                            </td>
                            <td>
                                <div class="discount-info">
                                    <span class="discount-badge active">$30 OFF</span>
                                    <small>Until Aug 15</small>
                                </div>
                            </td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                                <button class="btn btn-secondary">Manage Bundle</button>
                                <button class="btn btn-secondary" onclick="showStoreSettingsModal()">Store Settings</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Custom Bedding Bundle</td>
                            <td><span class="product-type type-bundle">Bundle</span></td>
                            <td>CBB-001</td>
                            <td>From $89.99</td>
                            <td>
                                <div class="stock-info">
                                    <span class="stock-level low">Shared Stock: 0 units</span>
                                    <div class="stock-breakdown">
                                        <small>Out of stock - backorders allowed</small>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="store-status">
                                    <span class="status-disabled">‚ùå purelinen</span>
                                    <span class="status-disabled">‚ùå linenthings</span>
                                </div>
                            </td>
                            <td>
                                <div class="discount-info">
                                    <span class="discount-badge scheduled">25% OFF</span>
                                    <small>Aug 1-31</small>
                                </div>
                            </td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                                <button class="btn btn-secondary">Configure Options</button>
                                <button class="btn btn-secondary" onclick="showStoreSettingsModal()">Store Settings</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Pure Linen Bath Towel</td>
                            <td><span class="product-type type-simple">Simple</span></td>
                            <td>PL-BT-001</td>
                            <td>$45.99</td>
                            <td>
                                <div class="stock-info">
                                    <span class="stock-level high">Shared Stock: 234 units</span>
                                    <div class="stock-breakdown">
                                        <small>Available across both stores</small>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="store-status">
                                    <span class="status-enabled">‚úÖ purelinen</span>
                                    <span class="status-enabled">‚úÖ linenthings</span>
                                </div>
                            </td>
                            <td>
                                <div class="discount-info">
                                    <span class="discount-badge expiring">15% OFF</span>
                                    <small>Until Aug 5</small>
                                </div>
                            </td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                                <button class="btn btn-secondary">Manage Stock</button>
                                <button class="btn btn-secondary" onclick="showStoreSettingsModal()">Store Settings</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Configurable Products Tab -->
        <div id="configurable" class="tab-content">
            <h2>‚öôÔ∏è Configurable Product Wizard</h2>
            
            <div class="wizard-steps">
                <div class="wizard-step active" id="step1">1. Basic Info</div>
                <div class="wizard-step" id="step2">2. Attributes</div>
                <div class="wizard-step" id="step3">3. Options</div>
                <div class="wizard-step" id="step4">4. Variant Matrix</div>
                <div class="wizard-step" id="step5">5. Media</div>
            </div>

            <div class="wizard-content">
                <!-- Step 1: Basic Information -->
                <div id="wizard-step1">
                    <h3>Step 1: Basic Product Information</h3>
                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" placeholder="e.g., Pure Linen Duvet Cover">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea rows="4" placeholder="Product description..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>SKU Pattern</label>
                        <input type="text" placeholder="e.g., PL-DC-{SIZE}-{COLOR}">
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select>
                            <option>Bedding</option>
                            <option>Bathroom</option>
                            <option>Kitchen</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="nextStep(2)">Next: Attributes</button>
                </div>

                <!-- Step 2: Attribute Selection -->
                <div id="wizard-step2" style="display: none;">
                    <h3>Step 2: Select Configurable Attributes</h3>
                    <div class="form-group">
                        <label>Choose from Attribute Sets</label>
                        <select>
                            <option>Bedding Attributes</option>
                            <option>Bathroom Attributes</option>
                            <option>Kitchen Attributes</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Configurable Attributes</label>
                        <div>
                            <input type="checkbox" checked> Size
                            <input type="checkbox" checked> Color
                            <input type="checkbox"> Material
                            <input type="checkbox"> Thread Count
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="prevStep(1)">Previous</button>
                    <button class="btn btn-primary" onclick="nextStep(3)">Next: Options</button>
                </div>

                <!-- Step 3: Option Configuration -->
                <div id="wizard-step3" style="display: none;">
                    <h3>Step 3: Configure Options</h3>
                    <div class="form-group">
                        <label>Size Options</label>
                        <input type="text" value="Single, Queen, King" placeholder="Comma-separated values">
                    </div>
                    <div class="form-group">
                        <label>Color Options</label>
                        <input type="text" value="White, Natural, Grey" placeholder="Comma-separated values">
                    </div>
                    <button class="btn btn-secondary" onclick="prevStep(2)">Previous</button>
                    <button class="btn btn-primary" onclick="nextStep(4)">Next: Variant Matrix</button>
                </div>

                <!-- Step 4: Variant Matrix -->
                <div id="wizard-step4" style="display: none;">
                    <h3>Step 4: Variant Matrix</h3>
                    <div class="variant-matrix">
                        <table>
                            <thead>
                                <tr>
                                    <th>Size</th>
                                    <th>Color</th>
                                    <th>Price</th>
                                    <th>SKU</th>
                                    <th>Stock</th>
                                    <th>Enable</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Single</td>
                                    <td>White</td>
                                    <td><input type="number" value="89.99" step="0.01"></td>
                                    <td>PL-DC-S-W</td>
                                    <td><input type="number" value="50"></td>
                                    <td><input type="checkbox" checked></td>
                                </tr>
                                <tr>
                                    <td>Single</td>
                                    <td>Natural</td>
                                    <td><input type="number" value="89.99" step="0.01"></td>
                                    <td>PL-DC-S-N</td>
                                    <td><input type="number" value="45"></td>
                                    <td><input type="checkbox" checked></td>
                                </tr>
                                <tr>
                                    <td>Queen</td>
                                    <td>White</td>
                                    <td><input type="number" value="99.99" step="0.01"></td>
                                    <td>PL-DC-Q-W</td>
                                    <td><input type="number" value="60"></td>
                                    <td><input type="checkbox" checked></td>
                                </tr>
                                <tr>
                                    <td>Queen</td>
                                    <td>Natural</td>
                                    <td><input type="number" value="99.99" step="0.01"></td>
                                    <td>PL-DC-Q-N</td>
                                    <td><input type="number" value="55"></td>
                                    <td><input type="checkbox" checked></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <button class="btn btn-secondary" onclick="prevStep(3)">Previous</button>
                    <button class="btn btn-primary" onclick="nextStep(5)">Next: Media</button>
                </div>

                <!-- Step 5: Media -->
                <div id="wizard-step5" style="display: none;">
                    <h3>Step 5: Media & Images</h3>
                    
                    <div class="image-management">
                        <!-- Main Product Images -->
                        <div class="form-group">
                            <label>Main Product Images</label>
                            <div class="image-upload-area">
                                <div class="upload-zone">
                                    <input type="file" multiple accept="image/*" id="mainImages">
                                    <div class="upload-text">
                                        <span>üìÅ</span>
                                        <p>Drag & drop images here or click to browse</p>
                                        <small>Upload multiple images for the product gallery</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Image Gallery Preview -->
                        <div class="form-group">
                            <label>Image Gallery Preview</label>
                            <div class="image-gallery-preview">
                                <div class="main-image">
                                    <img src="https://via.placeholder.com/400x400/f3f4f6/6b7280?text=Main+Image" alt="Main Product Image" id="mainPreview">
                                </div>
                                <div class="thumbnail-strip">
                                    <div class="thumbnail active" onclick="selectImage(0)">
                                        <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=1" alt="Thumbnail 1">
                                    </div>
                                    <div class="thumbnail" onclick="selectImage(1)">
                                        <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=2" alt="Thumbnail 2">
                                    </div>
                                    <div class="thumbnail" onclick="selectImage(2)">
                                        <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=3" alt="Thumbnail 3">
                                    </div>
                                    <div class="thumbnail" onclick="selectImage(3)">
                                        <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=4" alt="Thumbnail 4">
                                    </div>
                                    <div class="thumbnail add-thumbnail" onclick="addImage()">
                                        <span>+</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Color Swatches -->
                        <div class="form-group">
                            <label>Color Swatches</label>
                            <div class="color-swatches">
                                <div class="swatch-group">
                                    <h5>White</h5>
                                    <div class="swatch-images">
                                        <div class="swatch-image">
                                            <img src="https://via.placeholder.com/60x60/ffffff/000000?text=W" alt="White Swatch">
                                            <input type="file" accept="image/*" class="swatch-upload">
                                            <span class="swatch-label">Main</span>
                                        </div>
                                        <div class="swatch-image">
                                            <img src="https://via.placeholder.com/60x60/f3f4f6/6b7280?text=1" alt="White Detail 1">
                                            <input type="file" accept="image/*" class="swatch-upload">
                                            <span class="swatch-label">Detail</span>
                                        </div>
                                        <div class="swatch-image">
                                            <img src="https://via.placeholder.com/60x60/f3f4f6/6b7280?text=2" alt="White Detail 2">
                                            <input type="file" accept="image/*" class="swatch-upload">
                                            <span class="swatch-label">Detail</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="swatch-group">
                                    <h5>Natural</h5>
                                    <div class="swatch-images">
                                        <div class="swatch-image">
                                            <img src="https://via.placeholder.com/60x60/f5f5dc/000000?text=N" alt="Natural Swatch">
                                            <input type="file" accept="image/*" class="swatch-upload">
                                            <span class="swatch-label">Main</span>
                                        </div>
                                        <div class="swatch-image">
                                            <img src="https://via.placeholder.com/60x60/f3f4f6/6b7280?text=1" alt="Natural Detail 1">
                                            <input type="file" accept="image/*" class="swatch-upload">
                                            <span class="swatch-label">Detail</span>
                                        </div>
                                        <div class="swatch-image">
                                            <img src="https://via.placeholder.com/60x60/f3f4f6/6b7280?text=2" alt="Natural Detail 2">
                                            <input type="file" accept="image/*" class="swatch-upload">
                                            <span class="swatch-label">Detail</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="swatch-group">
                                    <h5>Grey</h5>
                                    <div class="swatch-images">
                                        <div class="swatch-image">
                                            <img src="https://via.placeholder.com/60x60/808080/ffffff?text=G" alt="Grey Swatch">
                                            <input type="file" accept="image/*" class="swatch-upload">
                                            <span class="swatch-label">Main</span>
                                        </div>
                                        <div class="swatch-image">
                                            <img src="https://via.placeholder.com/60x60/f3f4f6/6b7280?text=1" alt="Grey Detail 1">
                                            <input type="file" accept="image/*" class="swatch-upload">
                                            <span class="swatch-label">Detail</span>
                                        </div>
                                        <div class="swatch-image">
                                            <img src="https://via.placeholder.com/60x60/f3f4f6/6b7280?text=2" alt="Grey Detail 2">
                                            <input type="file" accept="image/*" class="swatch-upload">
                                            <span class="swatch-label">Detail</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Variant-Specific Images -->
                        <div class="form-group">
                            <label>Variant-Specific Images</label>
                            <div class="variant-images">
                                <div class="variant-image-row">
                                    <div class="variant-info">
                                        <strong>Single White</strong>
                                        <small>PL-DC-S-W</small>
                                    </div>
                                    <div class="variant-image-uploads">
                                        <div class="variant-image">
                                            <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=SW" alt="Single White">
                                            <input type="file" accept="image/*">
                                            <span class="image-label">Main</span>
                                        </div>
                                        <div class="variant-image">
                                            <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=1" alt="Detail 1">
                                            <input type="file" accept="image/*">
                                            <span class="image-label">Detail</span>
                                        </div>
                                        <div class="variant-image">
                                            <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=2" alt="Detail 2">
                                            <input type="file" accept="image/*">
                                            <span class="image-label">Detail</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="variant-image-row">
                                    <div class="variant-info">
                                        <strong>Queen Natural</strong>
                                        <small>PL-DC-Q-N</small>
                                    </div>
                                    <div class="variant-image-uploads">
                                        <div class="variant-image">
                                            <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=QN" alt="Queen Natural">
                                            <input type="file" accept="image/*">
                                            <span class="image-label">Main</span>
                                        </div>
                                        <div class="variant-image">
                                            <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=1" alt="Detail 1">
                                            <input type="file" accept="image/*">
                                            <span class="image-label">Detail</span>
                                        </div>
                                        <div class="variant-image">
                                            <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=2" alt="Detail 2">
                                            <input type="file" accept="image/*">
                                            <span class="image-label">Detail</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Image Settings -->
                        <div class="form-group">
                            <label>Image Settings</label>
                            <div class="image-settings">
                                <div class="setting-row">
                                    <label>
                                        <input type="checkbox" checked> Enable Image Zoom
                                    </label>
                                    <label>
                                        <input type="checkbox" checked> Show Image Gallery
                                    </label>
                                    <label>
                                        <input type="checkbox" checked> Enable Color Swatches
                                    </label>
                                </div>
                                <div class="setting-row">
                                    <label>Main Image Size: 
                                        <select>
                                            <option>800x800px</option>
                                            <option>1000x1000px</option>
                                            <option>1200x1200px</option>
                                        </select>
                                    </label>
                                    <label>Thumbnail Size: 
                                        <select>
                                            <option>80x80px</option>
                                            <option>100x100px</option>
                                            <option>120x120px</option>
                                        </select>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-secondary" onclick="prevStep(4)">Previous</button>
                    <button class="btn btn-primary">Create Product</button>
                    <button class="btn btn-secondary" onclick="showFrontendPreview()">Preview Frontend</button>
                </div>
            </div>
        </div>

        <!-- Grouped Products Tab -->
        <div id="grouped" class="tab-content">
            <h2>üì¶ Grouped Product Management</h2>
            
            <div class="wizard-content">
                <div class="form-group">
                    <label>Bundle Name</label>
                    <input type="text" value="Luxury Bedding Set - Queen">
                </div>
                <div class="form-group">
                    <label>Bundle Description</label>
                    <textarea rows="3">Complete bedding set including duvet cover, pillow shams, and fitted sheet.</textarea>
                </div>
                <div class="form-group">
                    <label>Bundle Price</label>
                    <input type="number" value="199.99" step="0.01">
                </div>
                
                <h3>Bundle Components</h3>
                <div class="product-grid">
                    <table>
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Individual Price</th>
                                <th>Quantity</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Pure Linen Duvet Cover - Queen</td>
                                <td>$99.99</td>
                                <td><input type="number" value="1" min="1"></td>
                                <td><button class="btn btn-secondary">Remove</button></td>
                            </tr>
                            <tr>
                                <td>Pure Linen Pillow Shams - Queen</td>
                                <td>$49.99</td>
                                <td><input type="number" value="2" min="1"></td>
                                <td><button class="btn btn-secondary">Remove</button></td>
                            </tr>
                            <tr>
                                <td>Pure Linen Fitted Sheet - Queen</td>
                                <td>$79.99</td>
                                <td><input type="number" value="1" min="1"></td>
                                <td><button class="btn btn-secondary">Remove</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <button class="btn btn-primary">Add Component</button>
                <button class="btn btn-primary">Save Bundle</button>
            </div>
        </div>

        <!-- Attributes Tab -->
        <div id="attributes" class="tab-content">
            <h2>üè∑Ô∏è Attribute Management</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Attribute Sets</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">45</div>
                    <div class="stat-label">Custom Attributes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Bedding Attributes</div>
                </div>
            </div>

            <div class="product-grid">
                <div class="product-grid-header">
                    <h3>Attribute Sets</h3>
                    <button class="btn btn-primary">Create Attribute Set</button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Attribute Set</th>
                            <th>Attributes</th>
                            <th>Products</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Bedding Attributes</td>
                            <td>Size, Color, Material, Thread Count, Care Instructions</td>
                            <td>1,250 products</td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                                <button class="btn btn-secondary">Duplicate</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Bathroom Attributes</td>
                            <td>Size, Color, Material, Absorbency, Weight</td>
                            <td>850 products</td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                                <button class="btn btn-secondary">Duplicate</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Kitchen Attributes</td>
                            <td>Size, Color, Material, Heat Resistance, Dishwasher Safe</td>
                            <td>650 products</td>
                            <td>
                                <button class="btn btn-secondary">Edit</button>
                                <button class="btn btn-secondary">Duplicate</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Swatch Database Tab -->
        <div id="swatches" class="tab-content">
            <h2>üé® Swatch Database</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">156</div>
                    <div class="stat-label">Total Swatches</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Categories</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1,234</div>
                    <div class="stat-label">Total Usage</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">Pure White</div>
                    <div class="stat-label">Most Popular</div>
                </div>
            </div>

            <div class="product-grid">
                <div class="product-grid-header">
                    <h3>Swatch Management</h3>
                    <div>
                        <button class="btn btn-secondary" onclick="showSwatchSearchModal()">Search Swatches</button>
                        <button class="btn btn-primary" onclick="showCreateSwatchModal()">Create New Swatch</button>
                    </div>
                </div>
                
                <div class="swatch-filters">
                    <select onchange="filterSwatchesByCategory(this.value)">
                        <option value="">All Categories</option>
                        <option value="neutral">Neutral</option>
                        <option value="bold">Bold</option>
                        <option value="pastel">Pastel</option>
                        <option value="earth">Earth Tones</option>
                        <option value="cool">Cool Colors</option>
                        <option value="warm">Warm Colors</option>
                    </select>
                    <select onchange="sortSwatches(this.value)">
                        <option value="name">Sort by Name</option>
                        <option value="usage">Sort by Usage</option>
                        <option value="created">Sort by Created</option>
                    </select>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Swatch</th>
                            <th>Color</th>
                            <th>Category</th>
                            <th>Usage Count</th>
                            <th>Image Sizes</th>
                            <th>Created</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="swatch-info">
                                    <div class="swatch-preview" style="background-color: #FFFFFF; border: 1px solid #e2e8f0;"></div>
                                    <div>
                                        <strong>Pure White</strong>
                                        <small>#FFFFFF</small>
                                    </div>
                                </div>
                            </td>
                            <td>White</td>
                            <td><span class="category-badge neutral">Neutral</span></td>
                            <td>45 products</td>
                            <td>
                                <div class="image-sizes">
                                    <span class="size-badge">800√ó1200</span>
                                    <span class="size-badge">1000√ó1500</span>
                                </div>
                            </td>
                            <td>Jan 15, 2024</td>
                            <td>
                                <button class="btn btn-secondary" onclick="editSwatch('swatch_1')">Edit</button>
                                <button class="btn btn-secondary" onclick="duplicateSwatch('swatch_1')">Duplicate</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="swatch-info">
                                    <div class="swatch-preview" style="background-color: #F5F5DC; border: 1px solid #e2e8f0;"></div>
                                    <div>
                                        <strong>Natural Linen</strong>
                                        <small>#F5F5DC</small>
                                    </div>
                                </div>
                            </td>
                            <td>Natural</td>
                            <td><span class="category-badge neutral">Neutral</span></td>
                            <td>32 products</td>
                            <td>
                                <div class="image-sizes">
                                    <span class="size-badge">800√ó1200</span>
                                    <span class="size-badge">1000√ó1500</span>
                                </div>
                            </td>
                            <td>Jan 20, 2024</td>
                            <td>
                                <button class="btn btn-secondary" onclick="editSwatch('swatch_2')">Edit</button>
                                <button class="btn btn-secondary" onclick="duplicateSwatch('swatch_2')">Duplicate</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="swatch-info">
                                    <div class="swatch-preview" style="background-color: #8B4513; border: 1px solid #e2e8f0;"></div>
                                    <div>
                                        <strong>Rich Brown</strong>
                                        <small>#8B4513</small>
                                    </div>
                                </div>
                            </td>
                            <td>Brown</td>
                            <td><span class="category-badge earth">Earth</span></td>
                            <td>28 products</td>
                            <td>
                                <div class="image-sizes">
                                    <span class="size-badge">800√ó1200</span>
                                    <span class="size-badge">1000√ó1500</span>
                                </div>
                            </td>
                            <td>Feb 5, 2024</td>
                            <td>
                                <button class="btn btn-secondary" onclick="editSwatch('swatch_3')">Edit</button>
                                <button class="btn btn-secondary" onclick="duplicateSwatch('swatch_3')">Duplicate</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <h2>üìà Product Analytics</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">$45,230</div>
                    <div class="stat-label">Revenue This Month</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1,234</div>
                    <div class="stat-label">Orders This Month</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">$36.67</div>
                    <div class="stat-label">Average Order Value</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">85%</div>
                    <div class="stat-label">Configurable Product Sales</div>
                </div>
            </div>

            <div class="product-grid">
                <div class="product-grid-header">
                    <h3>Top Performing Products by Type</h3>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Type</th>
                            <th>Sales</th>
                            <th>Revenue</th>
                            <th>Growth</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Pure Linen Duvet Cover</td>
                            <td><span class="product-type type-configurable">Configurable</span></td>
                            <td>156 units</td>
                            <td>$15,234</td>
                            <td style="color: #059669;">+23%</td>
                        </tr>
                        <tr>
                            <td>Luxury Bedding Set</td>
                            <td><span class="product-type type-grouped">Grouped</span></td>
                            <td>89 units</td>
                            <td>$17,799</td>
                            <td style="color: #059669;">+18%</td>
                        </tr>
                        <tr>
                            <td>Custom Bedding Bundle</td>
                            <td><span class="product-type type-bundle">Bundle</span></td>
                            <td>67 units</td>
                            <td>$8,234</td>
                            <td style="color: #dc2626;">-5%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Stock Management Tab -->
        <div id="stock" class="tab-content">
            <h2>üì¶ Stock Management</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">2,105</div>
                    <div class="stat-label">Products In Stock</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">45</div>
                    <div class="stat-label">Low Stock Items</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Out of Stock</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">$12,450</div>
                    <div class="stat-label">Stock Value</div>
                </div>
            </div>

            <div class="product-grid">
                <div class="product-grid-header">
                    <h3>Stock Overview</h3>
                    <div>
                        <button class="btn btn-secondary" onclick="showBulkStockModal()">Bulk Stock Update</button>
                        <button class="btn btn-primary">Export Stock Report</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>SKU</th>
                            <th>Current Stock</th>
                            <th>Min Stock Level</th>
                            <th>Status</th>
                            <th>Last Updated</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Pure Linen Duvet Cover - Single White</td>
                            <td>PL-DC-S-W</td>
                            <td><span class="stock-level high">45</span></td>
                            <td>10</td>
                            <td>‚úÖ In Stock</td>
                            <td>2025-07-27 15:30</td>
                            <td>
                                <button class="btn btn-secondary" onclick="showStockModal('PL-DC-S-W')">Update Stock</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Pure Linen Duvet Cover - Queen Natural</td>
                            <td>PL-DC-Q-N</td>
                            <td><span class="stock-level medium">8</span></td>
                            <td>10</td>
                            <td>‚ö†Ô∏è Low Stock</td>
                            <td>2025-07-27 14:15</td>
                            <td>
                                <button class="btn btn-secondary" onclick="showStockModal('PL-DC-Q-N')">Update Stock</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Luxury Bedding Set - Queen</td>
                            <td>LBS-001</td>
                            <td><span class="stock-level low">0</span></td>
                            <td>5</td>
                            <td>‚ùå Out of Stock</td>
                            <td>2025-07-27 12:45</td>
                            <td>
                                <button class="btn btn-secondary" onclick="showStockModal('LBS-001')">Update Stock</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Pure Linen Bath Towel</td>
                            <td>PL-BT-001</td>
                            <td><span class="stock-level high">234</span></td>
                            <td>20</td>
                            <td>‚úÖ In Stock</td>
                            <td>2025-07-27 16:20</td>
                            <td>
                                <button class="btn btn-secondary" onclick="showStockModal('PL-BT-001')">Update Stock</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Store Settings Modal -->
        <div id="storeSettingsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üè™ Store Settings</h3>
                    <span class="close" onclick="closeModal('storeSettingsModal')">&times;</span>
                </div>
                <div class="modal-body">
                    <h4>Product: Pure Linen Duvet Cover</h4>
                    
                    <div class="store-settings">
                        <div class="store-setting">
                            <h5>purelinen.com.au (B2B)</h5>
                            <div class="setting-row">
                                <label>
                                    <input type="checkbox" checked> Enable Product
                                </label>
                                <label>
                                    <input type="checkbox" checked> Show Stock Status
                                </label>
                                <label>
                                    <input type="checkbox"> Allow Backorders
                                </label>
                            </div>
                            <div class="setting-row">
                                <label>B2B Price: <input type="number" value="89.99" step="0.01"></label>
                                <label>Min Order Qty: <input type="number" value="1" min="1"></label>
                            </div>
                        </div>
                        
                        <div class="store-setting">
                            <h5>linenthings.com.au (B2C)</h5>
                            <div class="setting-row">
                                <label>
                                    <input type="checkbox"> Enable Product
                                </label>
                                <label>
                                    <input type="checkbox" checked> Show Stock Status
                                </label>
                                <label>
                                    <input type="checkbox"> Allow Backorders
                                </label>
                            </div>
                            <div class="setting-row">
                                <label>B2C Price: <input type="number" value="99.99" step="0.01"></label>
                                <label>Min Order Qty: <input type="number" value="1" min="1"></label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('storeSettingsModal')">Cancel</button>
                    <button class="btn btn-primary">Save Settings</button>
                </div>
            </div>
        </div>

        <!-- Stock Update Modal -->
        <div id="stockModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üì¶ Update Stock</h3>
                    <span class="close" onclick="closeModal('stockModal')">&times;</span>
                </div>
                <div class="modal-body">
                    <h4 id="stockProductName">Product Stock Update</h4>
                    
                    <div class="form-group">
                        <label>Current Stock Level</label>
                        <input type="number" id="currentStock" min="0" value="0">
                    </div>
                    
                    <div class="form-group">
                        <label>Minimum Stock Level</label>
                        <input type="number" id="minStock" min="0" value="10">
                    </div>
                    
                    <div class="form-group">
                        <label>Stock Adjustment</label>
                        <input type="number" id="stockAdjustment" placeholder="+/- quantity">
                        <small>Use positive numbers to add stock, negative to remove</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="stockNotes" rows="3" placeholder="Reason for stock adjustment..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('stockModal')">Cancel</button>
                    <button class="btn btn-primary">Update Stock</button>
                </div>
            </div>
        </div>

        <!-- Frontend Preview Modal -->
        <div id="frontendPreviewModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 1000px; width: 95%;">
                <div class="modal-header">
                    <h3>üñºÔ∏è Frontend Preview - Pure Linen Duvet Cover</h3>
                    <span class="close" onclick="closeModal('frontendPreviewModal')">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="frontend-preview">
                        <div class="product-gallery">
                            <div class="main-product-image">
                                <img src="https://via.placeholder.com/500x500/f3f4f6/6b7280?text=Main+Product+Image" alt="Pure Linen Duvet Cover" id="frontendMainImage">
                                <div class="image-zoom-hint">üîç Click to zoom</div>
                            </div>
                            <div class="image-thumbnails">
                                <div class="thumbnail active" onclick="selectFrontendImage(0)">
                                    <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=1" alt="Image 1">
                                </div>
                                <div class="thumbnail" onclick="selectFrontendImage(1)">
                                    <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=2" alt="Image 2">
                                </div>
                                <div class="thumbnail" onclick="selectFrontendImage(2)">
                                    <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=3" alt="Image 3">
                                </div>
                                <div class="thumbnail" onclick="selectFrontendImage(3)">
                                    <img src="https://via.placeholder.com/80x80/f3f4f6/6b7280?text=4" alt="Image 4">
                                </div>
                            </div>
                        </div>
                        
                        <div class="product-details">
                            <h2>Pure Linen Duvet Cover</h2>
                            <div class="price">$89.99 - $119.99</div>
                            
                            <div class="product-options">
                                <div class="option-group">
                                    <label>Size</label>
                                    <div class="option-buttons">
                                        <button class="option-btn active">Single</button>
                                        <button class="option-btn">Queen</button>
                                        <button class="option-btn">King</button>
                                    </div>
                                </div>
                                
                                <div class="option-group">
                                    <label>Color</label>
                                    <div class="color-swatches-frontend">
                                        <div class="color-swatch active" onclick="selectColor('white')" style="background: #ffffff; border: 1px solid #e2e8f0;">
                                            <span class="swatch-label">White</span>
                                        </div>
                                        <div class="color-swatch" onclick="selectColor('natural')" style="background: #f5f5dc; border: 1px solid #e2e8f0;">
                                            <span class="swatch-label">Natural</span>
                                        </div>
                                        <div class="color-swatch" onclick="selectColor('grey')" style="background: #808080; border: 1px solid #e2e8f0;">
                                            <span class="swatch-label">Grey</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="quantity-selector">
                                    <label>Quantity</label>
                                    <div class="quantity-controls">
                                        <button class="qty-btn" onclick="changeQuantity(-1)">-</button>
                                        <input type="number" value="1" min="1" id="quantityInput">
                                        <button class="qty-btn" onclick="changeQuantity(1)">+</button>
                                    </div>
                                </div>
                                
                                <button class="add-to-cart-btn">Add to Cart</button>
                            </div>
                            
                            <div class="product-description">
                                <h3>Description</h3>
                                <p>Pure linen duvet cover made from 100% European flax. Available in multiple sizes and colors. Features a hidden button closure and corner ties to keep your duvet in place.</p>
                                
                                <h3>Features</h3>
                                <ul>
                                    <li>100% Pure European Linen</li>
                                    <li>Breathable and moisture-wicking</li>
                                    <li>Hidden button closure</li>
                                    <li>Corner ties included</li>
                                    <li>Machine washable</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('frontendPreviewModal')">Close Preview</button>
                    <button class="btn btn-primary">View Live Site</button>
                </div>
            </div>
        </div>

        <!-- Discount Management Tab -->
        <div id="discounts" class="tab-content">
            <h2>üè∑Ô∏è Discount Management</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Active Discounts</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">3</div>
                    <div class="stat-label">Expiring Soon</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">$2,450</div>
                    <div class="stat-label">Total Savings Given</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">15%</div>
                    <div class="stat-label">Average Discount</div>
                </div>
            </div>

            <div class="product-grid">
                <div class="product-grid-header">
                    <h3>Active Discounts</h3>
                    <div>
                        <button class="btn btn-secondary" onclick="showBulkDiscountModal()">Bulk Discount</button>
                        <button class="btn btn-primary" onclick="showCreateDiscountModal()">Create Discount</button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Store</th>
                            <th>Discount Type</th>
                            <th>Original Price</th>
                            <th>Discount Price</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Pure Linen Duvet Cover</td>
                            <td>purelinen.com.au</td>
                            <td><span class="discount-type percentage">20% OFF</span></td>
                            <td>$99.99</td>
                            <td><span class="discount-price">$79.99</span></td>
                            <td>2025-07-01</td>
                            <td>2025-07-31</td>
                            <td><span class="status-active">‚úÖ Active</span></td>
                            <td>
                                <button class="btn btn-secondary" onclick="editDiscount('discount1')">Edit</button>
                                <button class="btn btn-secondary" onclick="duplicateDiscount('discount1')">Duplicate</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Luxury Bedding Set</td>
                            <td>linenthings.com.au</td>
                            <td><span class="discount-type fixed">$30 OFF</span></td>
                            <td>$199.99</td>
                            <td><span class="discount-price">$169.99</span></td>
                            <td>2025-07-15</td>
                            <td>2025-08-15</td>
                            <td><span class="status-active">‚úÖ Active</span></td>
                            <td>
                                <button class="btn btn-secondary" onclick="editDiscount('discount2')">Edit</button>
                                <button class="btn btn-secondary" onclick="duplicateDiscount('discount2')">Duplicate</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Pure Linen Bath Towel</td>
                            <td>Both Stores</td>
                            <td><span class="discount-type percentage">15% OFF</span></td>
                            <td>$45.99</td>
                            <td><span class="discount-price">$39.09</span></td>
                            <td>2025-07-20</td>
                            <td>2025-08-05</td>
                            <td><span class="status-expiring">‚ö†Ô∏è Expiring Soon</span></td>
                            <td>
                                <button class="btn btn-secondary" onclick="editDiscount('discount3')">Edit</button>
                                <button class="btn btn-secondary" onclick="duplicateDiscount('discount3')">Duplicate</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Custom Bedding Bundle</td>
                            <td>purelinen.com.au</td>
                            <td><span class="discount-type percentage">25% OFF</span></td>
                            <td>$149.99</td>
                            <td><span class="discount-price">$112.49</span></td>
                            <td>2025-08-01</td>
                            <td>2025-08-31</td>
                            <td><span class="status-scheduled">üìÖ Scheduled</span></td>
                            <td>
                                <button class="btn btn-secondary" onclick="editDiscount('discount4')">Edit</button>
                                <button class="btn btn-secondary" onclick="duplicateDiscount('discount4')">Duplicate</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Create Discount Modal -->
        <div id="createDiscountModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 700px;">
                <div class="modal-header">
                    <h3>üè∑Ô∏è Create New Discount</h3>
                    <span class="close" onclick="closeModal('createDiscountModal')">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="discount-form">
                        <div class="form-group">
                            <label>Discount Name</label>
                            <input type="text" placeholder="e.g., Summer Sale 20% Off">
                        </div>
                        
                        <div class="form-group">
                            <label>Select Products</label>
                            <div class="product-selector">
                                <div class="product-option">
                                    <input type="checkbox" id="product1">
                                    <label for="product1">Pure Linen Duvet Cover</label>
                                </div>
                                <div class="product-option">
                                    <input type="checkbox" id="product2">
                                    <label for="product2">Luxury Bedding Set</label>
                                </div>
                                <div class="product-option">
                                    <input type="checkbox" id="product3">
                                    <label for="product3">Pure Linen Bath Towel</label>
                                </div>
                                <div class="product-option">
                                    <input type="checkbox" id="product4">
                                    <label for="product4">Custom Bedding Bundle</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Select Stores</label>
                            <div class="store-selector">
                                <div class="store-option">
                                    <input type="checkbox" id="store1" checked>
                                    <label for="store1">purelinen.com.au (B2B)</label>
                                </div>
                                <div class="store-option">
                                    <input type="checkbox" id="store2">
                                    <label for="store2">linenthings.com.au (B2C)</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Discount Type</label>
                            <div class="discount-type-selector">
                                <div class="type-option">
                                    <input type="radio" name="discountType" id="percentage" value="percentage" checked>
                                    <label for="percentage">Percentage Off</label>
                                </div>
                                <div class="type-option">
                                    <input type="radio" name="discountType" id="fixed" value="fixed">
                                    <label for="fixed">Fixed Amount Off</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Discount Value</label>
                            <div class="discount-value-input">
                                <input type="number" id="discountValue" placeholder="20" min="0" step="0.01">
                                <span id="discountUnit">%</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Date Range</label>
                            <div class="date-range">
                                <div class="date-input">
                                    <label>Start Date</label>
                                    <input type="datetime-local" id="startDate">
                                </div>
                                <div class="date-input">
                                    <label>End Date</label>
                                    <input type="datetime-local" id="endDate">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Discount Preview</label>
                            <div class="discount-preview">
                                <div class="preview-item">
                                    <strong>Pure Linen Duvet Cover</strong>
                                    <div class="price-comparison">
                                        <span class="original-price">$99.99</span>
                                        <span class="arrow">‚Üí</span>
                                        <span class="discounted-price">$79.99</span>
                                        <span class="savings">(Save $20.00)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('createDiscountModal')">Cancel</button>
                    <button class="btn btn-primary">Create Discount</button>
                </div>
            </div>
        </div>

        <!-- Bulk Discount Modal -->
        <div id="bulkDiscountModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 800px;">
                <div class="modal-header">
                    <h3>üè∑Ô∏è Bulk Discount Operations</h3>
                    <span class="close" onclick="closeModal('bulkDiscountModal')">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="bulk-discount-form">
                        <div class="form-group">
                            <label>Select Products by Category</label>
                            <div class="category-selector">
                                <div class="category-option">
                                    <input type="checkbox" id="cat1">
                                    <label for="cat1">Bedding (1,250 products)</label>
                                </div>
                                <div class="category-option">
                                    <input type="checkbox" id="cat2">
                                    <label for="cat2">Bathroom (850 products)</label>
                                </div>
                                <div class="category-option">
                                    <input type="checkbox" id="cat3">
                                    <label for="cat3">Kitchen (650 products)</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Bulk Discount Settings</label>
                            <div class="bulk-settings">
                                <div class="setting-row">
                                    <label>Discount Type: 
                                        <select>
                                            <option>Percentage Off</option>
                                            <option>Fixed Amount Off</option>
                                        </select>
                                    </label>
                                    <label>Discount Value: <input type="number" placeholder="15" min="0" step="0.01"> %</label>
                                </div>
                                <div class="setting-row">
                                    <label>Start Date: <input type="datetime-local"></label>
                                    <label>End Date: <input type="datetime-local"></label>
                                </div>
                                <div class="setting-row">
                                    <label>Apply to: 
                                        <select>
                                            <option>All Selected Products</option>
                                            <option>Products with stock > 10</option>
                                            <option>Products priced > $50</option>
                                        </select>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Estimated Impact</label>
                            <div class="impact-summary">
                                <div class="impact-item">
                                    <strong>Products Affected:</strong> 1,250
                                </div>
                                <div class="impact-item">
                                    <strong>Total Revenue Impact:</strong> -$12,450
                                </div>
                                <div class="impact-item">
                                    <strong>Average Discount:</strong> 15%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('bulkDiscountModal')">Cancel</button>
                    <button class="btn btn-primary">Apply Bulk Discount</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Swatch Creation Modal -->
    <div id="createSwatchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üé® Create New Swatch</h3>
                <span class="close" onclick="closeModal('createSwatchModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Swatch Name *</label>
                    <input type="text" id="swatchName" placeholder="e.g., Pure White, Natural Linen">
                </div>
                <div class="form-group">
                    <label>Color Name *</label>
                    <input type="text" id="colorName" placeholder="e.g., White, Natural, Brown">
                </div>
                <div class="form-group">
                    <label>Color Code *</label>
                    <div class="color-picker-container">
                        <input type="color" id="colorPicker" value="#FFFFFF">
                        <input type="text" id="colorCode" placeholder="#FFFFFF" pattern="^#[0-9A-Fa-f]{6}$">
                    </div>
                </div>
                <div class="form-group">
                    <label>Category *</label>
                    <select id="swatchCategory">
                        <option value="neutral">Neutral</option>
                        <option value="bold">Bold</option>
                        <option value="pastel">Pastel</option>
                        <option value="earth">Earth Tones</option>
                        <option value="cool">Cool Colors</option>
                        <option value="warm">Warm Colors</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Swatch Image (800√ó1200 or 1000√ó1500)</label>
                    <input type="file" id="swatchImage" accept="image/*" onchange="validateSwatchImage(this)">
                    <small class="help-text">Recommended: 800√ó1200 for best quality</small>
                </div>
                <div class="form-group">
                    <label>Thumbnail Image (200√ó300)</label>
                    <input type="file" id="swatchThumbnail" accept="image/*" onchange="validateThumbnailImage(this)">
                    <small class="help-text">Auto-generated if not provided</small>
                </div>
                <div class="swatch-preview-section">
                    <h4>Preview</h4>
                    <div class="swatch-preview-large" id="swatchPreviewLarge"></div>
                    <div class="swatch-preview-thumb" id="swatchPreviewThumb"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('createSwatchModal')">Cancel</button>
                <button class="btn btn-primary" onclick="createSwatch()">Create Swatch</button>
            </div>
        </div>
    </div>

    <!-- Swatch Search Modal -->
    <div id="swatchSearchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîç Search Swatches</h3>
                <span class="close" onclick="closeModal('swatchSearchModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="search-controls">
                    <div class="form-group">
                        <label>Search Query</label>
                        <input type="text" id="swatchSearchQuery" placeholder="Search by name, color, or code..." onkeyup="searchSwatches()">
                    </div>
                    <div class="form-group">
                        <label>Category Filter</label>
                        <select id="swatchSearchCategory" onchange="searchSwatches()">
                            <option value="">All Categories</option>
                            <option value="neutral">Neutral</option>
                            <option value="bold">Bold</option>
                            <option value="pastel">Pastel</option>
                            <option value="earth">Earth Tones</option>
                            <option value="cool">Cool Colors</option>
                            <option value="warm">Warm Colors</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Sort By</label>
                        <select id="swatchSearchSort" onchange="searchSwatches()">
                            <option value="name">Name</option>
                            <option value="usage">Usage Count</option>
                            <option value="created">Created Date</option>
                        </select>
                    </div>
                </div>
                <div class="search-results" id="swatchSearchResults">
                    <!-- Search results will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('swatchSearchModal')">Close</button>
                <button class="btn btn-primary" onclick="selectSwatch()" id="selectSwatchBtn" disabled>Select Swatch</button>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all nav tabs
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to selected nav tab
            event.target.classList.add('active');
        }

        function nextStep(step) {
            // Hide current step
            const currentStep = document.querySelector('.wizard-content > div:not([style*="display: none"])');
            currentStep.style.display = 'none';
            
            // Show next step
            document.getElementById(`wizard-step${step}`).style.display = 'block';
            
            // Update wizard steps
            updateWizardSteps(step);
        }

        function prevStep(step) {
            // Hide current step
            const currentStep = document.querySelector('.wizard-content > div:not([style*="display: none"])');
            currentStep.style.display = 'none';
            
            // Show previous step
            document.getElementById(`wizard-step${step}`).style.display = 'block';
            
            // Update wizard steps
            updateWizardSteps(step);
        }

        function updateWizardSteps(currentStep) {
            const steps = document.querySelectorAll('.wizard-step');
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });
        }

        function showBulkStockModal() {
            alert('Bulk Stock Update functionality not yet implemented.');
        }

        function showStockModal(sku) {
            const modal = document.getElementById('stockModal');
            const productNameElement = modal.querySelector('#stockProductName');
            productNameElement.textContent = `Product Stock Update: SKU ${sku}`;
            document.getElementById('currentStock').value = 0; // Reset for new product
            document.getElementById('minStock').value = 10; // Reset for new product
            document.getElementById('stockAdjustment').value = ''; // Reset for new product
            document.getElementById('stockNotes').value = ''; // Reset for new product
            modal.style.display = 'block';
        }

        function showStoreSettingsModal() {
            const modal = document.getElementById('storeSettingsModal');
            modal.style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // New functions for image management
        function addImage() {
            const mainImagesInput = document.getElementById('mainImages');
            const mainImages = mainImagesInput.files;
            const mainPreview = document.getElementById('mainPreview');
            const thumbnailStrip = document.querySelector('.thumbnail-strip');

            if (mainImages.length > 0) {
                for (let i = 0; i < mainImages.length; i++) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const newThumbnail = document.createElement('div');
                        newThumbnail.classList.add('thumbnail');
                        newThumbnail.onclick = function() { selectImage(i); };
                        newThumbnail.innerHTML = `<img src="${e.target.result}" alt="Main Image ${i+1}">`;
                        thumbnailStrip.appendChild(newThumbnail);
                    }
                    reader.readAsDataURL(mainImages[i]);
                }
                mainImagesInput.value = ''; // Clear the input so the same file can be selected again
            }
        }

        function selectImage(index) {
            const mainImagesInput = document.getElementById('mainImages');
            const mainImages = mainImagesInput.files;
            const mainPreview = document.getElementById('mainPreview');
            const thumbnailStrip = document.querySelector('.thumbnail-strip');

            if (mainImages.length > 0) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    mainPreview.src = e.target.result;
                    // Highlight the selected thumbnail
                    thumbnailStrip.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
                    thumbnailStrip.children[index].classList.add('active');
                }
                reader.readAsDataURL(mainImages[index]);
            }
        }

        // Enhanced image management functions
        function initializeImageManagement() {
            // Handle main image uploads
            const mainImagesInput = document.getElementById('mainImages');
            if (mainImagesInput) {
                mainImagesInput.addEventListener('change', handleMainImageUpload);
            }

            // Handle swatch image uploads
            const swatchUploads = document.querySelectorAll('.swatch-upload');
            swatchUploads.forEach(upload => {
                upload.addEventListener('change', handleSwatchImageUpload);
            });

            // Handle variant image uploads
            const variantImageUploads = document.querySelectorAll('.variant-image input[type="file"]');
            variantImageUploads.forEach(upload => {
                upload.addEventListener('change', handleVariantImageUpload);
            });

            // Setup drag and drop for upload zones
            setupDragAndDrop();
        }

        function handleMainImageUpload(event) {
            const files = event.target.files;
            const thumbnailStrip = document.querySelector('.thumbnail-strip');
            const mainPreview = document.getElementById('mainPreview');

            // Clear existing thumbnails (except the add button)
            const addButton = thumbnailStrip.querySelector('.add-thumbnail');
            thumbnailStrip.innerHTML = '';
            if (addButton) thumbnailStrip.appendChild(addButton);

            // Add new thumbnails
            Array.from(files).forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const thumbnail = document.createElement('div');
                    thumbnail.classList.add('thumbnail');
                    if (index === 0) thumbnail.classList.add('active');
                    thumbnail.onclick = function() { 
                        selectMainImage(e.target.result, index);
                        thumbnailStrip.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                        thumbnail.classList.add('active');
                    };
                    thumbnail.innerHTML = `<img src="${e.target.result}" alt="Image ${index + 1}">`;
                    thumbnailStrip.insertBefore(thumbnail, addButton);
                    
                    // Set first image as main preview
                    if (index === 0) {
                        mainPreview.src = e.target.result;
                    }
                };
                reader.readAsDataURL(file);
            });
        }

        function handleSwatchImageUpload(event) {
            const file = event.target.files[0];
            const swatchImage = event.target.parentElement;
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = swatchImage.querySelector('img');
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        function handleVariantImageUpload(event) {
            const file = event.target.files[0];
            const variantImage = event.target.parentElement;
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = variantImage.querySelector('img');
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        function selectMainImage(imageSrc, index) {
            const mainPreview = document.getElementById('mainPreview');
            mainPreview.src = imageSrc;
        }

        function setupDragAndDrop() {
            const uploadZone = document.querySelector('.upload-zone');
            if (!uploadZone) return;

            uploadZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadZone.style.borderColor = '#3b82f6';
                uploadZone.style.background = '#f1f5f9';
            });

            uploadZone.addEventListener('dragleave', function(e) {
                e.preventDefault();
                uploadZone.style.borderColor = '#e2e8f0';
                uploadZone.style.background = '#f8fafc';
            });

            uploadZone.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadZone.style.borderColor = '#e2e8f0';
                uploadZone.style.background = '#f8fafc';
                
                const files = e.dataTransfer.files;
                const mainImagesInput = document.getElementById('mainImages');
                
                // Create a new FileList-like object
                const dt = new DataTransfer();
                Array.from(files).forEach(file => dt.items.add(file));
                mainImagesInput.files = dt.files;
                
                // Trigger the change event
                const event = new Event('change', { bubbles: true });
                mainImagesInput.dispatchEvent(event);
            });
        }

        // Initialize image management when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeImageManagement();
        });

        function showFrontendPreview() {
            const modal = document.getElementById('frontendPreviewModal');
            modal.style.display = 'block';
        }

        // Frontend preview functionality
        function selectFrontendImage(index) {
            const thumbnails = document.querySelectorAll('.image-thumbnails .thumbnail');
            const mainImage = document.getElementById('frontendMainImage');
            
            // Update active thumbnail
            thumbnails.forEach(thumb => thumb.classList.remove('active'));
            thumbnails[index].classList.add('active');
            
            // Update main image (in a real implementation, this would load the actual image)
            const imageSrc = thumbnails[index].querySelector('img').src;
            mainImage.src = imageSrc;
        }

        function selectColor(color) {
            const swatches = document.querySelectorAll('.color-swatch');
            swatches.forEach(swatch => swatch.classList.remove('active'));
            
            // Find and activate the selected color swatch
            const selectedSwatch = Array.from(swatches).find(swatch => 
                swatch.querySelector('.swatch-label').textContent.toLowerCase() === color
            );
            if (selectedSwatch) {
                selectedSwatch.classList.add('active');
            }
            
            // In a real implementation, this would change the product images
            // to show the selected color variant
            console.log(`Selected color: ${color}`);
        }

        function changeQuantity(delta) {
            const quantityInput = document.getElementById('quantityInput');
            const currentValue = parseInt(quantityInput.value) || 1;
            const newValue = Math.max(1, currentValue + delta);
            quantityInput.value = newValue;
        }

        // Add click handlers for option buttons
        document.addEventListener('DOMContentLoaded', function() {
            const optionButtons = document.querySelectorAll('.option-btn');
            optionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons in the same group
                    const parentGroup = this.closest('.option-group');
                    parentGroup.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                });
            });

            // Initialize discount management
            initializeDiscountManagement();
        });

        // Discount Management Functions
        function initializeDiscountManagement() {
            // Handle discount type switching
            const discountTypeRadios = document.querySelectorAll('input[name="discountType"]');
            discountTypeRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    const discountUnit = document.getElementById('discountUnit');
                    if (this.value === 'percentage') {
                        discountUnit.textContent = '%';
                    } else {
                        discountUnit.textContent = '$';
                    }
                    updateDiscountPreview();
                });
            });

            // Handle discount value changes
            const discountValueInput = document.getElementById('discountValue');
            if (discountValueInput) {
                discountValueInput.addEventListener('input', updateDiscountPreview);
            }

            // Handle date changes
            const startDateInput = document.getElementById('startDate');
            const endDateInput = document.getElementById('endDate');
            if (startDateInput && endDateInput) {
                startDateInput.addEventListener('change', validateDateRange);
                endDateInput.addEventListener('change', validateDateRange);
            }
        }

        function showCreateDiscountModal() {
            const modal = document.getElementById('createDiscountModal');
            modal.style.display = 'block';
            
            // Set default dates
            const now = new Date();
            const startDate = document.getElementById('startDate');
            const endDate = document.getElementById('endDate');
            
            if (startDate) {
                startDate.value = now.toISOString().slice(0, 16);
            }
            if (endDate) {
                const endDateValue = new Date(now.getTime() + (30 * 24 * 60 * 60 * 1000)); // 30 days from now
                endDate.value = endDateValue.toISOString().slice(0, 16);
            }
        }

        function showBulkDiscountModal() {
            const modal = document.getElementById('bulkDiscountModal');
            modal.style.display = 'block';
        }

        function editDiscount(discountId) {
            console.log(`Editing discount: ${discountId}`);
            // In a real implementation, this would load the discount data into the create modal
            showCreateDiscountModal();
        }

        function duplicateDiscount(discountId) {
            console.log(`Duplicating discount: ${discountId}`);
            // In a real implementation, this would copy the discount data and open the create modal
            showCreateDiscountModal();
        }

        function updateDiscountPreview() {
            const discountValue = parseFloat(document.getElementById('discountValue')?.value) || 0;
            const discountType = document.querySelector('input[name="discountType"]:checked')?.value;
            const originalPrice = 99.99; // This would come from the selected product
            
            let discountedPrice, savings;
            
            if (discountType === 'percentage') {
                discountedPrice = originalPrice * (1 - discountValue / 100);
                savings = originalPrice - discountedPrice;
            } else {
                discountedPrice = Math.max(0, originalPrice - discountValue);
                savings = discountValue;
            }
            
            // Update the preview
            const previewElement = document.querySelector('.discounted-price');
            const savingsElement = document.querySelector('.savings');
            
            if (previewElement) {
                previewElement.textContent = `$${discountedPrice.toFixed(2)}`;
            }
            if (savingsElement) {
                savingsElement.textContent = `(Save $${savings.toFixed(2)})`;
            }
        }

        function validateDateRange() {
            const startDate = new Date(document.getElementById('startDate')?.value);
            const endDate = new Date(document.getElementById('endDate')?.value);
            
            if (startDate && endDate && startDate >= endDate) {
                alert('End date must be after start date');
                document.getElementById('endDate').value = '';
            }
        }

        // Swatch Database Functions
        function showCreateSwatchModal() {
            const modal = document.getElementById('createSwatchModal');
            modal.style.display = 'block';
            
            // Reset form
            document.getElementById('swatchName').value = '';
            document.getElementById('colorName').value = '';
            document.getElementById('colorPicker').value = '#FFFFFF';
            document.getElementById('colorCode').value = '#FFFFFF';
            document.getElementById('swatchCategory').value = 'neutral';
            document.getElementById('swatchImage').value = '';
            document.getElementById('swatchThumbnail').value = '';
            
            // Reset previews
            document.getElementById('swatchPreviewLarge').innerHTML = 'Preview';
            document.getElementById('swatchPreviewThumb').innerHTML = 'Thumb';
            
            // Set up color picker sync
            setupColorPickerSync();
        }

        function showSwatchSearchModal() {
            const modal = document.getElementById('swatchSearchModal');
            modal.style.display = 'block';
            
            // Load initial search results
            searchSwatches();
        }

        function setupColorPickerSync() {
            const colorPicker = document.getElementById('colorPicker');
            const colorCode = document.getElementById('colorCode');
            
            colorPicker.addEventListener('input', function() {
                colorCode.value = this.value.toUpperCase();
                updateSwatchPreview();
            });
            
            colorCode.addEventListener('input', function() {
                if (this.value.match(/^#[0-9A-Fa-f]{6}$/)) {
                    colorPicker.value = this.value;
                    updateSwatchPreview();
                }
            });
        }

        function updateSwatchPreview() {
            const colorCode = document.getElementById('colorCode').value;
            const colorName = document.getElementById('colorName').value;
            
            if (colorCode && colorCode.match(/^#[0-9A-Fa-f]{6}$/)) {
                document.getElementById('swatchPreviewLarge').style.backgroundColor = colorCode;
                document.getElementById('swatchPreviewLarge').innerHTML = colorName || 'Preview';
                
                document.getElementById('swatchPreviewThumb').style.backgroundColor = colorCode;
                document.getElementById('swatchPreviewThumb').innerHTML = colorName || 'Thumb';
            }
        }

        function validateSwatchImage(input) {
            const file = input.files[0];
            if (file) {
                validateImageSize(file).then(result => {
                    if (!result.isValid) {
                        alert(`Image size warning: ${file.name} is ${result.width}√ó${result.height}\n\n` +
                              `Recommended sizes: 800√ó1200 or 1000√ó1500\n` +
                              `Your image will be automatically resized to maintain quality.`);
                    }
                });
            }
        }

        function validateThumbnailImage(input) {
            const file = input.files[0];
            if (file) {
                validateImageSize(file).then(result => {
                    if (!result.isValid) {
                        alert(`Thumbnail size warning: ${file.name} is ${result.width}√ó${result.height}\n\n` +
                              `Recommended size: 200√ó300\n` +
                              `Your thumbnail will be automatically resized.`);
                    }
                });
            }
        }

        async function createSwatch() {
            const name = document.getElementById('swatchName').value;
            const colorName = document.getElementById('colorName').value;
            const colorCode = document.getElementById('colorCode').value;
            const category = document.getElementById('swatchCategory').value;
            
            if (!name || !colorName || !colorCode) {
                alert('Please fill in all required fields (Swatch Name, Color Name, Color Code)');
                return;
            }
            
            if (!colorCode.match(/^#[0-9A-Fa-f]{6}$/)) {
                alert('Please enter a valid color code (e.g., #FFFFFF)');
                return;
            }
            
            try {
                const response = await fetch('/admin/swatches', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name,
                        color_name: colorName,
                        color_code: colorCode,
                        category,
                        image_url: '',
                        thumbnail_url: ''
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    alert(`Swatch "${name}" created successfully!\n\nThis swatch is now available for all configurable products.`);
                    closeModal('createSwatchModal');
                } else {
                    const error = await response.json();
                    alert(`Error creating swatch: ${error.error}`);
                }
            } catch (error) {
                console.error('Error creating swatch:', error);
                alert('Error creating swatch. Please try again.');
            }
        }

        async function searchSwatches() {
            const query = document.getElementById('swatchSearchQuery').value;
            const category = document.getElementById('swatchSearchCategory').value;
            const sortBy = document.getElementById('swatchSearchSort').value;
            
            try {
                let url = '/admin/swatches';
                const params = new URLSearchParams();
                
                if (query) {
                    params.append('query', query);
                }
                if (category) {
                    url = `/admin/swatches/category/${category}`;
                }
                if (sortBy === 'usage') {
                    url = '/admin/swatches/popular';
                    params.append('limit', '50');
                }
                
                if (params.toString()) {
                    url += '?' + params.toString();
                }
                
                const response = await fetch(url);
                
                if (response.ok) {
                    const data = await response.json();
                    let swatches = data.swatches || [];
                    
                    // Client-side sorting for non-usage sorting
                    if (sortBy !== 'usage') {
                        swatches.sort((a, b) => {
                            switch (sortBy) {
                                case 'created':
                                    return new Date(b.created_at) - new Date(a.created_at);
                                default:
                                    return a.name.localeCompare(b.name);
                            }
                        });
                    }
                    
                    displaySearchResults(swatches);
                } else {
                    console.error('Error fetching swatches');
                    displaySearchResults([]);
                }
            } catch (error) {
                console.error('Error searching swatches:', error);
                displaySearchResults([]);
            }
        }

        function displaySearchResults(swatches) {
            const resultsContainer = document.getElementById('swatchSearchResults');
            
            if (swatches.length === 0) {
                resultsContainer.innerHTML = '<div style="padding: 2rem; text-align: center; color: #6b7280;">No swatches found</div>';
                return;
            }
            
            resultsContainer.innerHTML = swatches.map(swatch => `
                <div class="search-result-item" onclick="selectSearchResult('${swatch.id}')" data-swatch-id="${swatch.id}">
                    <div class="search-result-preview" style="background-color: ${swatch.color_code}"></div>
                    <div class="search-result-info">
                        <strong>${swatch.name}</strong>
                        <small>${swatch.color_name} ‚Ä¢ ${swatch.color_code}</small>
                    </div>
                    <div class="search-result-usage">${swatch.usage_count || 0} products</div>
                </div>
            `).join('');
        }

        function selectSearchResult(swatchId) {
            // Remove previous selection
            document.querySelectorAll('.search-result-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // Add selection to clicked item
            const selectedItem = document.querySelector(`[data-swatch-id="${swatchId}"]`);
            if (selectedItem) {
                selectedItem.classList.add('selected');
            }
            
            // Enable select button
            document.getElementById('selectSwatchBtn').disabled = false;
        }

        function selectSwatch() {
            const selectedItem = document.querySelector('.search-result-item.selected');
            if (selectedItem) {
                const swatchId = selectedItem.getAttribute('data-swatch-id');
                alert(`Swatch selected: ${swatchId}\n\nIn a real implementation, this swatch would be assigned to the current product.`);
                closeModal('swatchSearchModal');
            }
        }

        function editSwatch(swatchId) {
            console.log(`Editing swatch: ${swatchId}`);
            alert(`Editing swatch ${swatchId} - In a real implementation, this would open the swatch editor with all current values pre-filled.`);
        }

        function duplicateSwatch(swatchId) {
            console.log(`Duplicating swatch: ${swatchId}`);
            alert(`Duplicating swatch ${swatchId} - In a real implementation, this would create a copy of the swatch with "Copy" appended to the name.`);
        }

        function filterSwatchesByCategory(category) {
            console.log(`Filtering swatches by category: ${category}`);
            // In a real implementation, this would filter the swatch table
            alert(`Filtering swatches by category: ${category || 'All Categories'}`);
        }

        function sortSwatches(sortBy) {
            console.log(`Sorting swatches by: ${sortBy}`);
            // In a real implementation, this would sort the swatch table
            alert(`Sorting swatches by: ${sortBy}`);
        }

        // Image Standards Functions
        function validateImageSize(file) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = function() {
                    const validSizes = [
                        { width: 800, height: 1200 },
                        { width: 1000, height: 1500 },
                        { width: 400, height: 600 },
                        { width: 200, height: 300 }
                    ];
                    
                    const isValid = validSizes.some(size => 
                        (img.width === size.width && img.height === size.height) ||
                        (img.width === size.height && img.height === size.width) // Allow rotation
                    );
                    
                    resolve({
                        isValid,
                        width: img.width,
                        height: img.height,
                        recommendedSize: validSizes.find(size => 
                            size.width === 800 && size.height === 1200
                        )
                    });
                };
                img.src = URL.createObjectURL(file);
            });
        }

        function showImageSizeWarning(file) {
            validateImageSize(file).then(result => {
                if (!result.isValid) {
                    alert(`Image size warning: ${file.name} is ${result.width}√ó${result.height}\n\n` +
                          `Recommended sizes: 800√ó1200 or 1000√ó1500\n` +
                          `Your image will be automatically resized to maintain quality.`);
                }
            });
        }
    </script>
</body>
</html> 